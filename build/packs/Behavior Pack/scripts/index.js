import*as e from"@minecraft/server-editor";import*as t from"@minecraft/server";var o={d:(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(e=>{var t={};return o.d(t,e),t})({ActionTypes:()=>e.ActionTypes,CursorControlMode:()=>e.CursorControlMode,CursorTargetMode:()=>e.CursorTargetMode,EditorInputContext:()=>e.EditorInputContext,EditorStatusBarAlignment:()=>e.EditorStatusBarAlignment,InputModifier:()=>e.InputModifier,KeyboardKey:()=>e.KeyboardKey,MouseActionType:()=>e.MouseActionType,MouseInputType:()=>e.MouseInputType,bindDataSource:()=>e.bindDataSource,executeLargeOperation:()=>e.executeLargeOperation,registerEditorExtension:()=>e.registerEditorExtension}),i=e=>(e.toolRail.addTool({displayAltText:"Divider",icon:"pack://textures/editor/divider.png?filtering=point"}),[]);const a=(e=>{var t={};return o.d(t,e),t})({BlockPermutation:()=>t.BlockPermutation,BlockStates:()=>t.BlockStates,BlockTypes:()=>t.BlockTypes,BlockVolumeUtils:()=>t.BlockVolumeUtils,BoundingBoxUtils:()=>t.BoundingBoxUtils,CompoundBlockVolumeAction:()=>t.CompoundBlockVolumeAction,EntityTypes:()=>t.EntityTypes,ItemStack:()=>t.ItemStack,ItemTypes:()=>t.ItemTypes,Vector:()=>t.Vector,WeatherType:()=>t.WeatherType,system:()=>t.system});class s{constructor(e,t,o,n){this.red=e,this.green=t,this.blue=o,this.alpha=n}}const r=e=>"string"==typeof e?e:"object"==typeof e&&null!==e&&"message"in e?e.message:"Unknown exception";class l{constructor(){this.positions=new Map}add(e){this.positions.set(this.getKey(e),!0),this.updateBounds(e)}remove(e){this.positions.delete(this.getKey(e)),this.updateBounds()}has(e){return this.positions.has(this.getKey(e))}getKey(e){return`${e.x}:${e.y}:${e.z}`}updateBounds(e){return e?this.min&&this.max?(this.min={x:Math.min(this.min.x,e.x),y:Math.min(this.min.y,e.y),z:Math.min(this.min.z,e.z)},void(this.max={x:Math.max(this.max.x,e.x),y:Math.max(this.max.y,e.y),z:Math.max(this.max.z,e.z)})):(this.min={x:e.x,y:e.y,z:e.z},void(this.max={x:e.x,y:e.y,z:e.z})):(this.min=void 0,void(this.max=void 0))}}class c extends l{calculateVolumes(){const e=[],t=new l;if(!this.min||!this.max)return e;for(let o=this.min.x;o<=this.max.x;o++)for(let n=this.min.z;n<=this.max.z;n++)for(let i=this.min.y;i<=this.max.y;i++){if(!this.has({x:o,y:i,z:n})||t.has({x:o,y:i,z:n}))continue;let a=0,s=0,r=0;for(let e=o+1;e<=this.max.x;e++){const o={x:e,y:i,z:n};if(!this.has(o)||t.has(o))break;a++}e:for(let e=n+1;e<=this.max.z;e++){for(let n=o;n<=o+a;n++){const o={x:n,y:i,z:e};if(!this.has(o)||t.has(o))break e}r++}e:for(let e=i+1;e<=this.max.y;e++){for(let i=o;i<=o+a;i++)for(let o=n;o<=n+r;o++){const n={x:i,y:e,z:o};if(!this.has(n)||t.has(n))break e}s++}for(let e=o;e<=o+a;e++)for(let o=i;o<=i+s;o++)for(let i=n;i<=n+r;i++)t.add({x:e,y:o,z:i});e.push({from:{x:o,y:i,z:n},to:{x:o+a,y:i+s,z:n+r}})}return e}}const u=(e,t,o=!1)=>{const n=new c,i=2*t-1,a=Math.floor(i/2);for(let i=0;i<t;i++){const s=a-i;for(let a=-s;a<=s;a++)for(let r=-s;r<=s;r++){const l=e.x+a,c=e.y+i,u=e.z+r;o&&i>0&&i<t-1&&a>-s&&a<s&&r>-s&&r<s||n.add({x:l,y:c,z:u})}}return n},g=(e,t,o,n=!1)=>{const i=new c;for(let a=0;a<o;a++){let s=e.x,r=e.y+a,l=e.z;for(let e=-t;e<=t;e++)for(let c=-t;c<=t;c++){const u=Math.sqrt(e*e+c*c);(!n&&u<=t||n&&(u>=t-.5&&u<=t+.5&&(0==a&&u<t-.5||a==o-1&&u<t-.5)||0!=a&&a!=o-1&&u<t-.5)&&(u>=t-1.5||0==a||a==o-1))&&i.add({x:s+e,y:r,z:l+c})}}return i},_=(e,t,o=!1)=>{const n=new c;for(let i=-t;i<=t;i++)for(let a=-t;a<=t;a++)for(let s=-t;s<=t;s++){const r=Math.sqrt(i*i+a*a+s*s);r<=t&&(!o||r>=t-1)&&n.add({x:e.x+i,y:e.y+a,z:e.z+s})}return n};var d;!function(e){e[e.Forward=0]="Forward",e[e.Right=1]="Right",e[e.Back=2]="Back",e[e.Left=3]="Left",e[e.Up=4]="Up",e[e.Down=5]="Down"}(d||(d={}));const p={[d.Forward]:a.Vector.forward,[d.Right]:a.Vector.left,[d.Back]:a.Vector.back,[d.Left]:a.Vector.right,[d.Up]:a.Vector.up,[d.Down]:a.Vector.down},m=(e,t)=>{const o=((e,t)=>t===d.Up||t===d.Down?t:Math.floor((e+405+90*t)%360/90))(e,t);return p[o]},y=["ancient_city:city/entrance/entrance_connector","ancient_city:city/entrance/entrance_path_1","ancient_city:city/entrance/entrance_path_2","ancient_city:city/entrance/entrance_path_3","ancient_city:city/entrance/entrance_path_4","ancient_city:city/entrance/entrance_path_5","ancient_city:city_center/city_center_1","ancient_city:city_center/city_center_2","ancient_city:city_center/city_center_3","ancient_city:city_center/walls/bottom_1","ancient_city:city_center/walls/bottom_2","ancient_city:city_center/walls/bottom_left_corner","ancient_city:city_center/walls/bottom_right_corner","ancient_city:city_center/walls/bottom_right_corner_1","ancient_city:city_center/walls/bottom_right_corner_2","ancient_city:city_center/walls/left","ancient_city:city_center/walls/right","ancient_city:city_center/walls/top","ancient_city:city_center/walls/top_left_corner","ancient_city:city_center/walls/top_right_corner","ancient_city:barracks","ancient_city:camp_1","ancient_city:camp_2","ancient_city:camp_3","ancient_city:chamber_1","ancient_city:chamber_2","ancient_city:chamber_3","ancient_city:ice_box_1","ancient_city:large_pillar_1","ancient_city:large_ruin_1","ancient_city:medium_pillar_1","ancient_city:medium_ruin_1","ancient_city:medium_ruin_2","ancient_city:sauna_1","ancient_city:small_ruin_1","ancient_city:small_ruin_2","ancient_city:small_statue","ancient_city:tall_ruin_1","ancient_city:tall_ruin_2","ancient_city:tall_ruin_3","ancient_city:tall_ruin_4","ancient_city:walls/intact_corner_wall_1","ancient_city:walls/intact_horizontal_wall_1","ancient_city:walls/intact_horizontal_wall_2","ancient_city:walls/intact_horizontal_wall_bridge","ancient_city:walls/intact_horizontal_wall_passage_1","ancient_city:walls/intact_horizontal_wall_stairs_1","ancient_city:walls/intact_horizontal_wall_stairs_2","ancient_city:walls/intact_horizontal_wall_stairs_3","ancient_city:walls/intact_horizontal_wall_stairs_4","ancient_city:walls/intact_intersection_wall_1","ancient_city:walls/intact_lshape_wall_1","ancient_city:walls/ruined_corner_wall_1","ancient_city:walls/ruined_corner_wall_2","ancient_city:walls/ruined_horizontal_wall_stairs_1","ancient_city:walls/ruined_horizontal_wall_stairs_2","ancient_city:walls/ruined_horizontal_wall_stairs_3","ancient_city:walls/ruined_horizontal_wall_stairs_4","bastion:jigsaw_test","bastion:blocks/air","bastion:blocks/gold","bastion:bridge/bridge_pieces/bridge","bastion:bridge/connectors/back_bridge_bottom","bastion:bridge/connectors/back_bridge_top","bastion:bridge/legs/leg_0","bastion:bridge/legs/leg_1","bastion:bridge/ramparts/rampart_0","bastion:bridge/ramparts/rampart_1","bastion:bridge/rampart_plates/plate_0","bastion:bridge/starting_pieces/entrance","bastion:bridge/starting_pieces/entrance_base","bastion:bridge/starting_pieces/entrance_face","bastion:bridge/walls/wall_base_0","bastion:bridge/walls/wall_base_1","bastion:hoglin_stable/air_base","bastion:hoglin_stable/connectors/end_post_connector","bastion:hoglin_stable/large_stables/inner_0","bastion:hoglin_stable/large_stables/inner_1","bastion:hoglin_stable/large_stables/inner_2","bastion:hoglin_stable/large_stables/inner_3","bastion:hoglin_stable/large_stables/inner_4","bastion:hoglin_stable/large_stables/outer_0","bastion:hoglin_stable/large_stables/outer_1","bastion:hoglin_stable/large_stables/outer_2","bastion:hoglin_stable/large_stables/outer_3","bastion:hoglin_stable/large_stables/outer_4","bastion:hoglin_stable/posts/end_post","bastion:hoglin_stable/posts/stair_post","bastion:hoglin_stable/ramparts/ramparts_1","bastion:hoglin_stable/ramparts/ramparts_2","bastion:hoglin_stable/ramparts/ramparts_3","bastion:hoglin_stable/rampart_plates/rampart_plate_1","bastion:hoglin_stable/small_stables/inner_0","bastion:hoglin_stable/small_stables/inner_1","bastion:hoglin_stable/small_stables/inner_2","bastion:hoglin_stable/small_stables/inner_3","bastion:hoglin_stable/small_stables/outer_0","bastion:hoglin_stable/small_stables/outer_1","bastion:hoglin_stable/small_stables/outer_2","bastion:hoglin_stable/small_stables/outer_3","bastion:hoglin_stable/stairs/stairs_1_0","bastion:hoglin_stable/stairs/stairs_1_1","bastion:hoglin_stable/stairs/stairs_1_2","bastion:hoglin_stable/stairs/stairs_1_3","bastion:hoglin_stable/stairs/stairs_1_4","bastion:hoglin_stable/stairs/stairs_2_0","bastion:hoglin_stable/stairs/stairs_2_1","bastion:hoglin_stable/stairs/stairs_2_2","bastion:hoglin_stable/stairs/stairs_2_3","bastion:hoglin_stable/stairs/stairs_2_4","bastion:hoglin_stable/stairs/stairs_3_0","bastion:hoglin_stable/stairs/stairs_3_1","bastion:hoglin_stable/stairs/stairs_3_2","bastion:hoglin_stable/stairs/stairs_3_3","bastion:hoglin_stable/stairs/stairs_3_4","bastion:hoglin_stable/starting_pieces/stairs_0_mirrored","bastion:hoglin_stable/starting_pieces/stairs_1_mirrored","bastion:hoglin_stable/starting_pieces/stairs_2_mirrored","bastion:hoglin_stable/starting_pieces/stairs_3_mirrored","bastion:hoglin_stable/starting_pieces/stairs_4_mirrored","bastion:hoglin_stable/starting_pieces/starting_stairs_0","bastion:hoglin_stable/starting_pieces/starting_stairs_1","bastion:hoglin_stable/starting_pieces/starting_stairs_2","bastion:hoglin_stable/starting_pieces/starting_stairs_3","bastion:hoglin_stable/starting_pieces/starting_stairs_4","bastion:hoglin_stable/walls/side_wall_0","bastion:hoglin_stable/walls/side_wall_1","bastion:hoglin_stable/walls/wall_base","bastion:mobs/crossbow_piglin","bastion:mobs/empty","bastion:mobs/hoglin","bastion:mobs/melee_piglin","bastion:mobs/melee_piglin_always","bastion:mobs/sword_piglin","bastion:treasure/big_air_full","bastion:treasure/bases/centers__center_0","bastion:treasure/bases/centers__center_1","bastion:treasure/bases/centers__center_2","bastion:treasure/bases/centers__center_3","bastion:treasure/bases/lava_basin","bastion:treasure/brains/center_brain","bastion:treasure/connectors/center_to_wall_middle","bastion:treasure/connectors/center_to_wall_top","bastion:treasure/connectors/center_to_wall_top_entrance","bastion:treasure/corners/bottom__corner_0","bastion:treasure/corners/bottom__corner_1","bastion:treasure/corners/edges__bottom","bastion:treasure/corners/edges__middle","bastion:treasure/corners/edges__top","bastion:treasure/corners/middle__corner_0","bastion:treasure/corners/middle__corner_1","bastion:treasure/corners/top__corner_0","bastion:treasure/corners/top__corner_1","bastion:treasure/entrances/entrance_0","bastion:treasure/extensions/empty","bastion:treasure/extensions/fire_room","bastion:treasure/extensions/house_0","bastion:treasure/extensions/house_1","bastion:treasure/extensions/large_bridge_0","bastion:treasure/extensions/large_bridge_1","bastion:treasure/extensions/large_bridge_2","bastion:treasure/extensions/large_bridge_3","bastion:treasure/extensions/roofed_bridge","bastion:treasure/extensions/small_bridge_0","bastion:treasure/extensions/small_bridge_1","bastion:treasure/extensions/small_bridge_2","bastion:treasure/extensions/small_bridge_3","bastion:treasure/ramparts/bottom_wall_0","bastion:treasure/ramparts/lava_basin","bastion:treasure/ramparts/lava_basin_main","bastion:treasure/ramparts/lava_basin_side","bastion:treasure/ramparts/mid_wall_main","bastion:treasure/ramparts/mid_wall_side","bastion:treasure/ramparts/top_wall","bastion:treasure/roofs/center_roof","bastion:treasure/roofs/corner_roof","bastion:treasure/roofs/wall_roof","bastion:treasure/stairs/lower_stairs","bastion:treasure/walls/bottom__wall_0","bastion:treasure/walls/bottom__wall_1","bastion:treasure/walls/bottom__wall_2","bastion:treasure/walls/bottom__wall_3","bastion:treasure/walls/entrance_wall","bastion:treasure/walls/lava_wall","bastion:treasure/walls/mid__wall_0","bastion:treasure/walls/mid__wall_1","bastion:treasure/walls/mid__wall_2","bastion:treasure/walls/outer__bottom_corner","bastion:treasure/walls/outer__medium_outer_wall","bastion:treasure/walls/outer__mid_corner","bastion:treasure/walls/outer__outer_wall","bastion:treasure/walls/outer__tall_outer_wall","bastion:treasure/walls/outer__top_corner","bastion:treasure/walls/top__main_entrance","bastion:treasure/walls/top__wall_0","bastion:treasure/walls/top__wall_1","bastion:units/air_base","bastion:units/center_pieces/center_0","bastion:units/center_pieces/center_1","bastion:units/center_pieces/center_2","bastion:units/edges/edge_0","bastion:units/fillers/stage_0","bastion:units/pathways/pathway_0","bastion:units/pathways/pathway_wall_0","bastion:units/ramparts/ramparts_0","bastion:units/ramparts/ramparts_1","bastion:units/ramparts/ramparts_2","bastion:units/rampart_plates/plate_0","bastion:units/stages/rot__stage_1_0","bastion:units/stages/stage_0_0","bastion:units/stages/stage_0_1","bastion:units/stages/stage_0_2","bastion:units/stages/stage_0_3","bastion:units/stages/stage_1_0","bastion:units/stages/stage_1_1","bastion:units/stages/stage_1_2","bastion:units/stages/stage_1_3","bastion:units/stages/stage_2_0","bastion:units/stages/stage_2_1","bastion:units/stages/stage_3_0","bastion:units/stages/stage_3_1","bastion:units/stages/stage_3_2","bastion:units/stages/stage_3_3","bastion:units/walls/connected_wall","bastion:units/walls/wall_base","bastion:units/wall_units/edge_0","bastion:units/wall_units/edge_0_large","bastion:units/wall_units/unit_0","coralcrust:crust1","coralcrust:crust2","coralcrust:crust3","coralcrust:crust4","coralcrust:crust5","coralcrust:outcropping1","coralcrust:outcropping2","coralcrust:outcropping3","coralcrust:outcropping4","coralcrust:outcropping5","coralcrust:outcropping6","endcity:base_floor","endcity:base_roof","endcity:bridge_end","endcity:bridge_gentle_stairs","endcity:bridge_piece","endcity:bridge_steep_stairs","endcity:fat_tower_base","endcity:fat_tower_middle","endcity:fat_tower_top","endcity:second_floor","endcity:second_floor_2","endcity:second_roof","endcity:ship","endcity:third_floor","endcity:third_floor_b","endcity:third_floor_c","endcity:third_roof","endcity:tower_base","endcity:tower_floor","endcity:tower_piece","endcity:tower_top","fossils:fossil_skull_01","fossils:fossil_skull_02","fossils:fossil_skull_03","fossils:fossil_skull_04","fossils:fossil_spine_01","fossils:fossil_spine_02","fossils:fossil_spine_03","fossils:fossil_spine_04","igloo:igloo_bottom","igloo:igloo_middle","igloo:igloo_top_no_trapdoor","igloo:igloo_top_trapdoor","mansion:1x1_a1","mansion:1x1_a2","mansion:1x1_a3","mansion:1x1_a4","mansion:1x1_a5","mansion:1x1_as1","mansion:1x1_as2","mansion:1x1_as3","mansion:1x1_as4","mansion:1x1_b1","mansion:1x1_b2","mansion:1x1_b3","mansion:1x1_b4","mansion:1x1_b5","mansion:1x2_a1","mansion:1x2_a2","mansion:1x2_a3","mansion:1x2_a4","mansion:1x2_a5","mansion:1x2_a6","mansion:1x2_a7","mansion:1x2_a8","mansion:1x2_a9","mansion:1x2_b1","mansion:1x2_b2","mansion:1x2_b3","mansion:1x2_b4","mansion:1x2_b5","mansion:1x2_c1","mansion:1x2_c2","mansion:1x2_c3","mansion:1x2_c4","mansion:1x2_c_stairs","mansion:1x2_d1","mansion:1x2_d2","mansion:1x2_d3","mansion:1x2_d4","mansion:1x2_d5","mansion:1x2_d_stairs","mansion:1x2_s1","mansion:1x2_s2","mansion:1x2_se1","mansion:2x2_a1","mansion:2x2_a2","mansion:2x2_a3","mansion:2x2_a4","mansion:2x2_b1","mansion:2x2_b2","mansion:2x2_b3","mansion:2x2_b4","mansion:2x2_b5","mansion:2x2_s1","mansion:carpet_east","mansion:carpet_north","mansion:carpet_south","mansion:carpet_south_2","mansion:carpet_west","mansion:carpet_west_2","mansion:corridor_floor","mansion:corridor_floor_2","mansion:entrance","mansion:indoors_door","mansion:indoors_door_2","mansion:indoors_wall","mansion:indoors_wall_2","mansion:roof","mansion:roof_corner","mansion:roof_front","mansion:roof_inner_corner","mansion:small_wall","mansion:small_wall_corner","mansion:wall_corner","mansion:wall_flat","mansion:wall_window","nether_fossils:fossil_1","nether_fossils:fossil_10","nether_fossils:fossil_11","nether_fossils:fossil_12","nether_fossils:fossil_13","nether_fossils:fossil_14","nether_fossils:fossil_2","nether_fossils:fossil_3","nether_fossils:fossil_4","nether_fossils:fossil_5","nether_fossils:fossil_6","nether_fossils:fossil_7","nether_fossils:fossil_8","nether_fossils:fossil_9","pillageroutpost:feature_cage1","pillageroutpost:feature_cage2","pillageroutpost:feature_cage_with_allays","pillageroutpost:feature_logs","pillageroutpost:feature_targets","pillageroutpost:feature_tent1","pillageroutpost:feature_tent2","pillageroutpost:watchtower","pillageroutpost:watchtower_overgrown","ruin:big_ruin1_brick","ruin:big_ruin1_cracked","ruin:big_ruin1_mossy","ruin:big_ruin2_brick","ruin:big_ruin2_cracked","ruin:big_ruin2_mossy","ruin:big_ruin3_brick","ruin:big_ruin3_cracked","ruin:big_ruin3_mossy","ruin:big_ruin8_brick","ruin:big_ruin8_cracked","ruin:big_ruin8_mossy","ruin:big_ruin_warm4","ruin:big_ruin_warm5","ruin:big_ruin_warm6","ruin:big_ruin_warm7","ruin:ruin1_brick","ruin:ruin1_cracked","ruin:ruin1_mossy","ruin:ruin2_brick","ruin:ruin2_cracked","ruin:ruin2_mossy","ruin:ruin3_brick","ruin:ruin3_cracked","ruin:ruin3_mossy","ruin:ruin4","ruin:ruin4_brick","ruin:ruin4_cracked","ruin:ruin4_mossy","ruin:ruin5_brick","ruin:ruin5_cracked","ruin:ruin5_mossy","ruin:ruin6_brick","ruin:ruin6_cracked","ruin:ruin6_mossy","ruin:ruin7_brick","ruin:ruin7_cracked","ruin:ruin7_mossy","ruin:ruin8_brick","ruin:ruin8_cracked","ruin:ruin8_mossy","ruin:ruin_warm1","ruin:ruin_warm2","ruin:ruin_warm3","ruin:ruin_warm4","ruin:ruin_warm5","ruin:ruin_warm6","ruin:ruin_warm7","ruin:ruin_warm8","ruined_portal:giant_portal_1","ruined_portal:giant_portal_2","ruined_portal:giant_portal_3","ruined_portal:portal_1","ruined_portal:portal_10","ruined_portal:portal_2","ruined_portal:portal_3","ruined_portal:portal_4","ruined_portal:portal_5","ruined_portal:portal_6","ruined_portal:portal_7","ruined_portal:portal_8","ruined_portal:portal_9","shipwreck:swrightsideupbackhalf","shipwreck:swrightsideupbackhalfdegraded","shipwreck:swrightsideupfronthalf","shipwreck:swrightsideupfronthalfdegraded","shipwreck:swrightsideupfull","shipwreck:swrightsideupfulldegraded","shipwreck:swsidewaysbackhalf","shipwreck:swsidewaysbackhalfdegraded","shipwreck:swsidewaysfronthalf","shipwreck:swsidewaysfronthalfdegraded","shipwreck:swsidewaysfull","shipwreck:swsidewaysfulldegraded","shipwreck:swupsidedownbackhalf","shipwreck:swupsidedownbackhalfdegraded","shipwreck:swupsidedownfronthalf","shipwreck:swupsidedownfronthalfdegraded","shipwreck:swupsidedownfull","shipwreck:swupsidedownfulldegraded","shipwreck:swwithmast","shipwreck:swwithmastdegraded","village:common/villager","village:common/well_bottom","village:common/animals/cat","village:common/animals/cows_1","village:common/animals/horses_1","village:common/animals/horses_2","village:common/animals/pigs_1","village:common/animals/sheep_1","village:desert/desert_lamp_1","village:desert/houses/desert_animal_pen_1","village:desert/houses/desert_animal_pen_2","village:desert/houses/desert_armorer_1","village:desert/houses/desert_butcher_shop_1","village:desert/houses/desert_cartographer_house_1","village:desert/houses/desert_farm_1","village:desert/houses/desert_farm_2","village:desert/houses/desert_fisher_1","village:desert/houses/desert_fletcher_house_1","village:desert/houses/desert_large_farm_1","village:desert/houses/desert_library_1","village:desert/houses/desert_mason_1","village:desert/houses/desert_medium_house_1","village:desert/houses/desert_medium_house_2","village:desert/houses/desert_shepherd_house_1","village:desert/houses/desert_small_house_1","village:desert/houses/desert_small_house_2","village:desert/houses/desert_small_house_3","village:desert/houses/desert_small_house_4","village:desert/houses/desert_small_house_5","village:desert/houses/desert_small_house_6","village:desert/houses/desert_small_house_7","village:desert/houses/desert_small_house_8","village:desert/houses/desert_tannery_1","village:desert/houses/desert_temple_1","village:desert/houses/desert_temple_2","village:desert/houses/desert_tool_smith_1","village:desert/houses/desert_weaponsmith_1","village:desert/streets/corner_01","village:desert/streets/corner_02","village:desert/streets/crossroad_01","village:desert/streets/crossroad_02","village:desert/streets/crossroad_03","village:desert/streets/square_01","village:desert/streets/square_02","village:desert/streets/straight_01","village:desert/streets/straight_02","village:desert/streets/straight_03","village:desert/streets/turn_01","village:desert/terminators/terminator_01","village:desert/terminators/terminator_02","village:desert/town_centers/desert_meeting_point_1","village:desert/town_centers/desert_meeting_point_2","village:desert/town_centers/desert_meeting_point_3","village:plains/plains_lamp_1","village:plains/houses/plains_accessory_1","village:plains/houses/plains_animal_pen_1","village:plains/houses/plains_animal_pen_2","village:plains/houses/plains_animal_pen_3","village:plains/houses/plains_armorer_house_1","village:plains/houses/plains_big_house_1","village:plains/houses/plains_butcher_shop_1","village:plains/houses/plains_butcher_shop_2","village:plains/houses/plains_cartographer_1","village:plains/houses/plains_fisher_cottage_1","village:plains/houses/plains_fletcher_house_1","village:plains/houses/plains_large_farm_1","village:plains/houses/plains_library_1","village:plains/houses/plains_library_2","village:plains/houses/plains_masons_house_1","village:plains/houses/plains_medium_house_1","village:plains/houses/plains_medium_house_2","village:plains/houses/plains_meeting_point_4","village:plains/houses/plains_meeting_point_5","village:plains/houses/plains_shepherds_house_1","village:plains/houses/plains_small_farm_1","village:plains/houses/plains_small_house_1","village:plains/houses/plains_small_house_2","village:plains/houses/plains_small_house_3","village:plains/houses/plains_small_house_4","village:plains/houses/plains_small_house_5","village:plains/houses/plains_small_house_6","village:plains/houses/plains_small_house_7","village:plains/houses/plains_small_house_8","village:plains/houses/plains_stable_1","village:plains/houses/plains_stable_2","village:plains/houses/plains_tannery_1","village:plains/houses/plains_temple_3","village:plains/houses/plains_temple_4","village:plains/houses/plains_tool_smith_1","village:plains/houses/plains_weaponsmith_1","village:plains/streets/corner_01","village:plains/streets/corner_02","village:plains/streets/corner_03","village:plains/streets/crossroad_01","village:plains/streets/crossroad_02","village:plains/streets/crossroad_03","village:plains/streets/crossroad_04","village:plains/streets/crossroad_05","village:plains/streets/crossroad_06","village:plains/streets/straight_01","village:plains/streets/straight_02","village:plains/streets/straight_03","village:plains/streets/straight_04","village:plains/streets/straight_05","village:plains/streets/straight_06","village:plains/streets/turn_01","village:plains/terminators/terminator_01","village:plains/terminators/terminator_02","village:plains/terminators/terminator_03","village:plains/terminators/terminator_04","village:plains/town_centers/plains_fountain_01","village:plains/town_centers/plains_meeting_point_1","village:plains/town_centers/plains_meeting_point_2","village:plains/town_centers/plains_meeting_point_3","village:plains/villagers/armorer","village:plains/villagers/butcher","village:plains/villagers/cartographer","village:plains/villagers/cleric","village:plains/villagers/farmer","village:plains/villagers/fishermen","village:plains/villagers/fletcher","village:plains/villagers/leatherworker","village:plains/villagers/librarian","village:plains/villagers/nitwit","village:plains/villagers/shepherd","village:plains/villagers/toolsmith","village:plains/villagers/unemployed","village:plains/villagers/weaponsmith","village:savanna/savanna_lamp_post_01","village:savanna/houses/savanna_animal_pen_1","village:savanna/houses/savanna_animal_pen_2","village:savanna/houses/savanna_animal_pen_3","village:savanna/houses/savanna_armorer_1","village:savanna/houses/savanna_butchers_shop_1","village:savanna/houses/savanna_butchers_shop_2","village:savanna/houses/savanna_cartographer_1","village:savanna/houses/savanna_fisher_cottage_1","village:savanna/houses/savanna_fletcher_house_1","village:savanna/houses/savanna_large_farm_1","village:savanna/houses/savanna_large_farm_2","village:savanna/houses/savanna_library_1","village:savanna/houses/savanna_mason_1","village:savanna/houses/savanna_medium_house_1","village:savanna/houses/savanna_medium_house_2","village:savanna/houses/savanna_shepherd_1","village:savanna/houses/savanna_small_farm","village:savanna/houses/savanna_small_house_1","village:savanna/houses/savanna_small_house_2","village:savanna/houses/savanna_small_house_3","village:savanna/houses/savanna_small_house_4","village:savanna/houses/savanna_small_house_5","village:savanna/houses/savanna_small_house_6","village:savanna/houses/savanna_small_house_7","village:savanna/houses/savanna_small_house_8","village:savanna/houses/savanna_tannery_1","village:savanna/houses/savanna_temple_1","village:savanna/houses/savanna_temple_2","village:savanna/houses/savanna_tool_smith_1","village:savanna/houses/savanna_weaponsmith_1","village:savanna/houses/savanna_weaponsmith_2","village:savanna/streets/corner_01","village:savanna/streets/corner_03","village:savanna/streets/crossroad_02","village:savanna/streets/crossroad_03","village:savanna/streets/crossroad_04","village:savanna/streets/crossroad_05","village:savanna/streets/crossroad_06","village:savanna/streets/crossroad_07","village:savanna/streets/split_01","village:savanna/streets/split_02","village:savanna/streets/straight_02","village:savanna/streets/straight_04","village:savanna/streets/straight_05","village:savanna/streets/straight_06","village:savanna/streets/straight_08","village:savanna/streets/straight_09","village:savanna/streets/straight_10","village:savanna/streets/straight_11","village:savanna/streets/turn_01","village:savanna/terminators/terminator_05","village:savanna/town_centers/savanna_meeting_point_1","village:savanna/town_centers/savanna_meeting_point_2","village:savanna/town_centers/savanna_meeting_point_3","village:savanna/town_centers/savanna_meeting_point_4","village:snowy/snowy_lamp_post_01","village:snowy/snowy_lamp_post_02","village:snowy/snowy_lamp_post_03","village:snowy/houses/snowy_animal_pen_1","village:snowy/houses/snowy_animal_pen_2","village:snowy/houses/snowy_armorer_house_1","village:snowy/houses/snowy_armorer_house_2","village:snowy/houses/snowy_butchers_shop_1","village:snowy/houses/snowy_butchers_shop_2","village:snowy/houses/snowy_cartographer_house_1","village:snowy/houses/snowy_farm_1","village:snowy/houses/snowy_farm_2","village:snowy/houses/snowy_fisher_cottage","village:snowy/houses/snowy_fletcher_house_1","village:snowy/houses/snowy_library_1","village:snowy/houses/snowy_masons_house_1","village:snowy/houses/snowy_masons_house_2","village:snowy/houses/snowy_medium_house_1","village:snowy/houses/snowy_medium_house_2","village:snowy/houses/snowy_medium_house_3","village:snowy/houses/snowy_shepherds_house_1","village:snowy/houses/snowy_small_house_1","village:snowy/houses/snowy_small_house_2","village:snowy/houses/snowy_small_house_3","village:snowy/houses/snowy_small_house_4","village:snowy/houses/snowy_small_house_5","village:snowy/houses/snowy_small_house_6","village:snowy/houses/snowy_small_house_7","village:snowy/houses/snowy_small_house_8","village:snowy/houses/snowy_tannery_1","village:snowy/houses/snowy_temple_1","village:snowy/houses/snowy_tool_smith_1","village:snowy/houses/snowy_weapon_smith_1","village:snowy/streets/corner_01","village:snowy/streets/corner_02","village:snowy/streets/corner_03","village:snowy/streets/crossroad_01","village:snowy/streets/crossroad_02","village:snowy/streets/crossroad_03","village:snowy/streets/crossroad_04","village:snowy/streets/crossroad_05","village:snowy/streets/crossroad_06","village:snowy/streets/square_01","village:snowy/streets/straight_01","village:snowy/streets/straight_02","village:snowy/streets/straight_03","village:snowy/streets/straight_04","village:snowy/streets/straight_06","village:snowy/streets/straight_08","village:snowy/streets/turn_01","village:snowy/town_centers/snowy_meeting_point_1","village:snowy/town_centers/snowy_meeting_point_2","village:snowy/town_centers/snowy_meeting_point_3","village:taiga/taiga_decoration_1","village:taiga/taiga_decoration_2","village:taiga/taiga_decoration_3","village:taiga/taiga_decoration_4","village:taiga/taiga_decoration_5","village:taiga/taiga_lamp_post_1","village:taiga/houses/taiga_animal_pen_1","village:taiga/houses/taiga_armorer_house_1","village:taiga/houses/taiga_armorer_house_2","village:taiga/houses/taiga_butcher_shop_1","village:taiga/houses/taiga_cartographer_house_1","village:taiga/houses/taiga_decoration_1","village:taiga/houses/taiga_fisher_cottage_1","village:taiga/houses/taiga_fletcher_house_1","village:taiga/houses/taiga_lamp_post_1","village:taiga/houses/taiga_large_farm_1","village:taiga/houses/taiga_large_farm_2","village:taiga/houses/taiga_library_1","village:taiga/houses/taiga_masons_house_1","village:taiga/houses/taiga_medium_house_1","village:taiga/houses/taiga_medium_house_2","village:taiga/houses/taiga_medium_house_3","village:taiga/houses/taiga_medium_house_4","village:taiga/houses/taiga_shepherds_house_1","village:taiga/houses/taiga_small_farm_1","village:taiga/houses/taiga_small_house_1","village:taiga/houses/taiga_small_house_2","village:taiga/houses/taiga_small_house_3","village:taiga/houses/taiga_small_house_4","village:taiga/houses/taiga_small_house_5","village:taiga/houses/taiga_tannery_1","village:taiga/houses/taiga_temple_1","village:taiga/houses/taiga_tool_smith_1","village:taiga/houses/taiga_weaponsmith_1","village:taiga/houses/taiga_weaponsmith_2","village:taiga/streets/corner_01","village:taiga/streets/corner_02","village:taiga/streets/corner_03","village:taiga/streets/crossroad_01","village:taiga/streets/crossroad_02","village:taiga/streets/crossroad_04","village:taiga/streets/crossroad_05","village:taiga/streets/crossroad_06","village:taiga/streets/straight_01","village:taiga/streets/straight_02","village:taiga/streets/straight_03","village:taiga/streets/straight_04","village:taiga/streets/straight_05","village:taiga/streets/straight_06","village:taiga/streets/turn_01","village:taiga/town_centers/taiga_meeting_point_1","village:taiga/town_centers/taiga_meeting_point_2"],x=(e,t,o,i)=>{const s=o.dimension.getBlock(i),r=e.createPropertyPane({titleAltText:"Block Modifier",titleStringId:"",width:40}),l=n.bindDataSource(r,{blockType:s.typeId,newBlockType:"minecraft:stone",location:s.location,waterlogged:s.isWaterlogged,weirdo_direction:s.permutation.getState("weirdo_direction"),direction:s.permutation.getState("direction"),lever_direction:s.permutation.getState("lever_direction"),brushed_progress:s.permutation.getState("brushed_progress"),growth:s.permutation.getState("growth"),redstone_signal:s.permutation.getState("redstone_signal"),repeater_delay:s.permutation.getState("repeater_delay"),rail_direction:s.permutation.getState("rail_direction"),damage:s.permutation.getState("damage")});r.addString(l,"blockType",{titleAltText:"Block Type",enable:!1}),r.addVector3(l,"location",{titleAltText:"Location",enable:!1,minX:Number.MIN_SAFE_INTEGER,minY:Number.MIN_SAFE_INTEGER,minZ:Number.MIN_SAFE_INTEGER}),r.addDivider(),r.addBlockPicker(l,"newBlockType",{titleAltText:"Block Type"}),r.addButton(e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:async()=>{r.dispose(),s.setType(l.newBlockType),"minecraft:air"!=l.newBlockType&&x(e,t,o,i)}}),{titleAltText:"Change Type"}),r.addDivider(),a.BlockTypes.get(s.typeId).canBeWaterlogged&&r.addBool(l,"waterlogged",{titleAltText:"Waterlogged",onChange:()=>{s.isWaterlogged=l.waterlogged}}),s.permutation.getState("lever_direction")&&r.addDropdown(l,"lever_direction",{titleAltText:"Lever Direction",dropdownItems:a.BlockStates.get("lever_direction").validValues.map((e=>({displayAltText:e,displayStringId:"",value:e}))),onChange:()=>{try{s.setPermutation(a.BlockPermutation.resolve(s.typeId,{lever_direction:l.lever_direction}))}catch(e){r.dispose()}}}),null!=s.permutation.getState("redstone_signal")&&r.addNumber(l,"redstone_signal",{titleAltText:"Redstone Signal",min:0,max:15,showSlider:!0,onChange:()=>{try{s.setPermutation(a.BlockPermutation.resolve(s.typeId,{redstone_signal:l.redstone_signal}))}catch(e){r.dispose()}}}),null!=s.permutation.getState("repeater_delay")&&r.addNumber(l,"repeater_delay",{titleAltText:"Repeater Delay",min:0,max:3,showSlider:!0,onChange:()=>{try{s.setPermutation(a.BlockPermutation.resolve(s.typeId,{repeater_delay:l.repeater_delay}))}catch(e){r.dispose()}}}),null==s.permutation.getState("weirdo_direction")&&null==s.permutation.getState("direction")||r.addNumber(l,null!=s.permutation.getState("weirdo_direction")?"weirdo_direction":"direction",{titleAltText:"Direction",min:0,max:3,showSlider:!0,onChange:()=>{try{let e=null!=s.permutation.getState("weirdo_direction")?{weirdo_direction:l.weirdo_direction}:{direction:l.direction};s.setPermutation(a.BlockPermutation.resolve(s.typeId,e))}catch(e){}}}),null!=s.permutation.getState("brushed_progress")&&r.addNumber(l,"brushed_progress",{titleAltText:"Brushed Progress",min:0,max:3,showSlider:!0,onChange:()=>{try{s.setPermutation(a.BlockPermutation.resolve(s.typeId,{brushed_progress:l.brushed_progress}))}catch(e){r.dispose()}}}),null!=s.permutation.getState("growth")&&r.addNumber(l,"growth",{titleAltText:"Growth",min:0,max:7,showSlider:!0,onChange:()=>{try{s.setPermutation(a.BlockPermutation.resolve(s.typeId,{growth:l.growth}))}catch(e){r.dispose()}}}),null!=s.permutation.getState("rail_direction")&&r.addNumber(l,"rail_direction",{titleAltText:"Rail Direction",min:0,max:9,showSlider:!0,onChange:()=>{try{s.setPermutation(a.BlockPermutation.resolve(s.typeId,{rail_direction:l.rail_direction}))}catch(e){r.dispose()}}}),s.permutation.getState("damage")&&r.addDropdown(l,"damage",{titleAltText:"Damage",dropdownItems:a.BlockStates.get("damage").validValues.map((e=>({displayAltText:e,displayStringId:"",value:e}))),onChange:()=>{try{s.setPermutation(a.BlockPermutation.resolve(s.typeId,{damage:l.damage}))}catch(e){r.dispose()}}}),t.bindPropertyPane(r),r.update(!0)},h={"minecraft:overworld":"Overworld","minecraft:nether":"The Nether","minecraft:the_end":"The End"};n.registerEditorExtension("PyramidBrush",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Pyramid",tooltipAltText:"Left mouse click or drag-to-paint",icon:"pack://textures/editor/pyramid.png?filtering=point"}),o=e.extensionContext.selectionManager.create();o.visible=!0,o.setOutlineColor(new s(0,.5,.5,.2)),o.setFillColor(new s(0,0,.5,.1)),e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5},previewSelection:o},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)}));const i=e.createPropertyPane({titleAltText:"Pyramid",titleStringId:""}),l=n.bindDataSource(i,{size:6,hollow:!1,face:!1,blockType:"minecraft:stone"});i.addNumber(l,"size",{titleAltText:"Brush Size",min:1,max:12,showSlider:!0}),i.addBool(l,"hollow",{titleAltText:"Hollow"}),i.addBool(l,"face",{titleAltText:"Face Mode",onChange:()=>{if(void 0===e.scratchStorage)return e.log.error("Cylinder storage was not initialized.");e.scratchStorage.currentCursorState.targetMode=l.face?n.CursorTargetMode.Face:n.CursorTargetMode.Block,e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)}}),i.addDivider(),i.addBlockPicker(l,"blockType",{titleAltText:"Block Type"}),t.bindPropertyPane(i);const c=()=>{if(!e.scratchStorage?.previewSelection)return e.log.error("Pyramid storage was not initialized.");const t=e.scratchStorage.previewSelection,o=e.extensionContext.player.dimension.getBlock(e.extensionContext.cursor.getPosition());if(!o)return;const n=o.location;if(e.scratchStorage.lastCursorPosition?.x==e.extensionContext.cursor.getPosition().x&&e.scratchStorage.lastCursorPosition?.y==e.extensionContext.cursor.getPosition().y&&e.scratchStorage.lastCursorPosition?.z==e.extensionContext.cursor.getPosition().z)return;const i=u(n,l.size,l.hollow).calculateVolumes();for(let e=0;e<i.length;e++){const o=i[e];(o.from.y>=-64&&o.from.y<=320||o.to.y>=-64&&o.to.y<=320)&&t.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:o})}e.scratchStorage.lastCursorPosition=e.extensionContext.cursor.getPosition()};return t.registerMouseWheelBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(e,t)=>{t.mouseAction===n.MouseActionType.Wheel&&(t.inputType===n.MouseInputType.WheelOut&&l.size<12?l.size++:t.inputType===n.MouseInputType.WheelIn&&l.size>1&&l.size--)}})),t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(t,o)=>{if(o.mouseAction===n.MouseActionType.LeftButton)if(o.inputType===n.MouseInputType.ButtonDown)e.extensionContext.transactionManager.openTransaction("cylinderTool"),e.scratchStorage.previewSelection.clear(),c();else if(o.inputType===n.MouseInputType.ButtonUp){const t=e.extensionContext.player;try{e.extensionContext.transactionManager.trackBlockChangeSelection(e.scratchStorage.previewSelection)}catch(t){return e.log.warning(`Unable to execute brush. ${r(t)}`),void e.extensionContext.transactionManager.discardOpenTransaction()}await n.executeLargeOperation(e.scratchStorage.previewSelection,(e=>{e.y>=-64&&e.y<=320&&a.system.run((async function(){const o=t.dimension.getBlock(e);o&&o.setType(l.blockType)}))})).catch((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})).then((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()}))}}})),t.registerMouseDragBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(e,t)=>{t.inputType===n.MouseInputType.Drag&&c()}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("CylinderBrush",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Cylinder (CTRL + SHIFT + C)",tooltipAltText:"Left mouse click or drag-to-paint",icon:"pack://textures/editor/cylinder.png?filtering=point"}),o=e.extensionContext.selectionManager.create();o.visible=!0,o.setOutlineColor(new s(0,.5,.5,.2)),o.setFillColor(new s(0,0,.5,.1)),e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5},previewSelection:o},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_C,n.InputModifier.Shift|n.InputModifier.Control);const i=e.createPropertyPane({titleAltText:"Cylinder",titleStringId:""}),l=n.bindDataSource(i,{size:3,height:6,hollow:!1,face:!1,blockType:"minecraft:stone"});i.addNumber(l,"size",{titleAltText:"Brush Size",min:1,max:16,showSlider:!0}),i.addNumber(l,"height",{titleAltText:"Height",min:1,max:8,showSlider:!0}),i.addBool(l,"hollow",{titleAltText:"Hollow"}),i.addBool(l,"face",{titleAltText:"Face Mode",onChange:()=>{if(void 0===e.scratchStorage)return e.log.error("Cylinder storage was not initialized.");e.scratchStorage.currentCursorState.targetMode=l.face?n.CursorTargetMode.Face:n.CursorTargetMode.Block,e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)}}),i.addDivider(),i.addBlockPicker(l,"blockType",{titleAltText:"Block Type"}),t.bindPropertyPane(i);const c=()=>{if(!e.scratchStorage?.previewSelection)return e.log.error("Cylinder storage was not initialized.");const t=e.scratchStorage.previewSelection,o=e.extensionContext.player.dimension.getBlock(e.extensionContext.cursor.getPosition());if(!o)return;const n=o.location;if(e.scratchStorage.lastCursorPosition?.x==e.extensionContext.cursor.getPosition().x&&e.scratchStorage.lastCursorPosition?.y==e.extensionContext.cursor.getPosition().y&&e.scratchStorage.lastCursorPosition?.z==e.extensionContext.cursor.getPosition().z)return;const i=g(n,l.size,l.height,l.hollow).calculateVolumes();for(let e=0;e<i.length;e++){const o=i[e];(o.from.y>=-64&&o.from.y<=320||o.to.y>=-64&&o.to.y<=320)&&t.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:o})}e.scratchStorage.lastCursorPosition=e.extensionContext.cursor.getPosition()};return t.registerMouseWheelBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(e,t)=>{t.mouseAction===n.MouseActionType.Wheel&&(t.modifiers.ctrl?t.inputType===n.MouseInputType.WheelOut&&l.height<8?l.height++:t.inputType===n.MouseInputType.WheelIn&&l.height>1&&l.height--:t.inputType===n.MouseInputType.WheelOut&&l.size<16?l.size++:t.inputType===n.MouseInputType.WheelIn&&l.size>1&&l.size--)}})),t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(t,o)=>{if(o.mouseAction===n.MouseActionType.LeftButton)if(o.inputType===n.MouseInputType.ButtonDown)e.extensionContext.transactionManager.openTransaction("cylinderTool"),e.scratchStorage.previewSelection.clear(),c();else if(o.inputType===n.MouseInputType.ButtonUp){const t=e.extensionContext.player;try{e.extensionContext.transactionManager.trackBlockChangeSelection(e.scratchStorage.previewSelection)}catch(t){return e.log.warning(`Unable to execute brush. ${r(t)}`),void e.extensionContext.transactionManager.discardOpenTransaction()}await n.executeLargeOperation(e.scratchStorage.previewSelection,(e=>{e.y>=-64&&e.y<=320&&a.system.run((async function(){const o=t.dimension.getBlock(e);o&&o.setType(l.blockType)}))})).catch((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})).then((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()}))}}})),t.registerMouseDragBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(e,t)=>{t.inputType===n.MouseInputType.Drag&&c()}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("SphereBrush",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Sphere (CTRL + SHIFT + S)",tooltipAltText:"Left mouse click or drag-to-paint",icon:"pack://textures/editor/sphere.png?filtering=point"}),o=e.extensionContext.selectionManager.create();o.visible=!0,o.setOutlineColor(new s(0,.5,.5,.2)),o.setFillColor(new s(0,0,.5,.1)),e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5},previewSelection:o},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_S,n.InputModifier.Shift|n.InputModifier.Control);const i=e.createPropertyPane({titleAltText:"Sphere",titleStringId:""}),l=n.bindDataSource(i,{size:3,hollow:!1,face:!1,blockType:"minecraft:stone"});i.addNumber(l,"size",{titleAltText:"Brush Size",min:1,max:10,showSlider:!0}),i.addBool(l,"hollow",{titleAltText:"Hollow"}),i.addBool(l,"face",{titleAltText:"Face Mode",onChange:()=>{if(null==e.scratchStorage)return e.log.error("Sphere storage was not initialized.");e.scratchStorage.currentCursorState.targetMode=l.face?n.CursorTargetMode.Face:n.CursorTargetMode.Block,e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)}}),i.addDivider(),i.addBlockPicker(l,"blockType",{titleAltText:"Block Type"}),t.bindPropertyPane(i);const c=()=>{if(!e.scratchStorage?.previewSelection)return e.log.error("Brush storage was not initialized.");const t=e.scratchStorage.previewSelection,o=e.extensionContext.player.dimension.getBlock(e.extensionContext.cursor.getPosition());if(!o)return;const n=o.location;if(e.scratchStorage.lastCursorPosition?.x==e.extensionContext.cursor.getPosition().x&&e.scratchStorage.lastCursorPosition?.y==e.extensionContext.cursor.getPosition().y&&e.scratchStorage.lastCursorPosition?.z==e.extensionContext.cursor.getPosition().z)return;const i=_(n,l.size,l.hollow).calculateVolumes();for(let e=0;e<i.length;e++){const o=i[e];(o.from.y>=-64&&o.from.y<=320||o.to.y>=-64&&o.to.y<=320)&&t.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:o})}e.scratchStorage.lastCursorPosition=e.extensionContext.cursor.getPosition()};return t.registerMouseWheelBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(e,t)=>{t.mouseAction===n.MouseActionType.Wheel&&(t.inputType===n.MouseInputType.WheelOut&&l.size<10?l.size++:t.inputType===n.MouseInputType.WheelIn&&l.size>1&&l.size--)}})),t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(t,o)=>{if(o.mouseAction===n.MouseActionType.LeftButton)if(o.inputType===n.MouseInputType.ButtonDown)e.extensionContext.transactionManager.openTransaction("sphereTool"),e.scratchStorage.previewSelection.clear(),c();else if(o.inputType===n.MouseInputType.ButtonUp){const t=e.extensionContext.player;try{e.extensionContext.transactionManager.trackBlockChangeSelection(e.scratchStorage.previewSelection)}catch(t){return e.log.warning(`Unable to execute brush. ${r(t)}`),void e.extensionContext.transactionManager.discardOpenTransaction()}await n.executeLargeOperation(e.scratchStorage.previewSelection,(e=>{e.y>=-64&&e.y<=320&&a.system.run((async function(){const o=t.dimension.getBlock(e);o&&o.setType(l.blockType)}))})).catch((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})).then((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()}))}}})),t.registerMouseDragBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(e,t)=>{t.inputType===n.MouseInputType.Drag&&c()}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("CubeBrush",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Cube (CTRL + B)",tooltipAltText:"Left mouse click or drag-to-paint",icon:"pack://textures/editor/Cube.png?filtering=point"}),o=e.extensionContext.selectionManager.create();o.visible=!0,o.setOutlineColor(new s(0,.5,.5,.2)),o.setFillColor(new s(0,0,.5,.1)),e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5},previewSelection:o},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_B,n.InputModifier.Control);const i=e.createPropertyPane({titleAltText:"Cube",titleStringId:""}),l=n.bindDataSource(i,{size:3,hollow:!1,face:!1,blockType:"minecraft:stone"});i.addNumber(l,"size",{titleAltText:"Brush Size",min:1,max:16,showSlider:!0}),i.addBool(l,"hollow",{titleAltText:"Hollow"}),i.addBool(l,"face",{titleAltText:"Face Mode",onChange:()=>{if(void 0===e.scratchStorage)return e.log.error("Cube storage was not initialized.");e.scratchStorage.currentCursorState.targetMode=l.face?n.CursorTargetMode.Face:n.CursorTargetMode.Block,e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)}}),i.addDivider(),i.addBlockPicker(l,"blockType",{titleAltText:"Block Type"}),t.bindPropertyPane(i);const c=()=>{if(!e.scratchStorage?.previewSelection)return e.log.error("Cube storage was not initialized.");const t=e.scratchStorage.previewSelection,o=e.extensionContext.player.dimension.getBlock(e.extensionContext.cursor.getPosition());if(!o)return;const n=e.extensionContext.player.getRotation().y,i=m(n,d.Right),s=m(n,d.Back),r=a.Vector.add(a.Vector.add(i,s),a.Vector.up),c=Math.floor(l.size/2);let u=a.Vector.multiply(r,-c);const g=a.Vector.multiply(r,l.size-1);l.size%2==0&&(u=a.Vector.add(u,a.Vector.up));const _={x:o.location.x+u.x,y:o.location.y+u.y,z:o.location.z+u.z},p={x:_.x+g.x,y:_.y+g.y,z:_.z+g.z},y=a.BlockVolumeUtils.getBoundingBox({from:_,to:p});if(e.scratchStorage.lastVolumePlaced&&a.BoundingBoxUtils.equals(e.scratchStorage.lastVolumePlaced,y))return;t.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:_,to:p}}),e.scratchStorage.lastVolumePlaced=y;const x=a.BoundingBoxUtils.getSpan(y);l.hollow&&x.x>2&&x.y>2&&x.z>2&&t.pushVolume({action:a.CompoundBlockVolumeAction.Subtract,volume:{from:{x:_.x+r.x,y:_.y+1,z:_.z+r.z},to:{x:p.x-r.x,y:p.y-1,z:p.z-r.z}}})};return t.registerMouseWheelBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(e,t)=>{t.mouseAction===n.MouseActionType.Wheel&&(t.inputType===n.MouseInputType.WheelOut&&l.size<16?l.size++:t.inputType===n.MouseInputType.WheelIn&&l.size>1&&l.size--)}})),t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(t,o)=>{if(o.mouseAction===n.MouseActionType.LeftButton)if(o.inputType===n.MouseInputType.ButtonDown)e.extensionContext.transactionManager.openTransaction("cubeTool"),e.scratchStorage.previewSelection.clear(),c();else if(o.inputType===n.MouseInputType.ButtonUp){const t=e.extensionContext.player;try{e.extensionContext.transactionManager.trackBlockChangeSelection(e.scratchStorage.previewSelection)}catch(t){return e.log.warning(`Unable to execute brush. ${r(t)}`),void e.extensionContext.transactionManager.discardOpenTransaction()}e.extensionContext.transactionManager.trackBlockChangeSelection(e.scratchStorage.previewSelection),await n.executeLargeOperation(e.scratchStorage.previewSelection,(e=>{e.y>=-64&&e.y<=320&&a.system.run((async function(){const o=t.dimension.getBlock(e);o&&o.setType(l.blockType)}))})).catch((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})).then((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()}))}}})),t.registerMouseDragBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(e,t)=>{t.inputType===n.MouseInputType.Drag&&c()}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("divider_",i,(()=>{})),n.registerEditorExtension("StructurePlacer",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Structure Placer (CTRL + P)",tooltipAltText:"Left mouse click to place a structure",icon:"pack://textures/editor/structure_placer.png?filtering=point"});e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Face,visible:!0,fixedModeDistance:5}},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_P,n.InputModifier.Control);const o=e.createPropertyPane({titleAltText:"Structure Placer",titleStringId:"",width:73}),i=n.bindDataSource(o,{structureName:"",face:!0,vanillaStructure:"",rotation:0,mirror:0,includeEntities:!0,waterlogBlocks:!1,removeBlocks:!1});o.addString(i,"structureName",{titleAltText:"Structure Name"}),o.addBool(i,"face",{titleAltText:"Face Mode",onChange:()=>{void 0!==e.scratchStorage?(e.scratchStorage.currentCursorState.targetMode=i.face?n.CursorTargetMode.Face:n.CursorTargetMode.Block,e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)):e.log.error("Cube storage was not initialized.")}}),o.addDropdown(i,"vanillaStructure",{titleAltText:"Vanilla Structure",dropdownItems:y.map(((e,t)=>({displayAltText:e,displayStringId:"",value:t}))),onChange:()=>{i.structureName=i.vanillaStructure}});const a=["0_degrees","90_degrees","180_degrees","270_degrees"];o.addDropdown(i,"rotation",{titleAltText:"Rotation",dropdownItems:[{displayAltText:"0°",displayStringId:"",value:0},{displayAltText:"90°",displayStringId:"",value:1},{displayAltText:"180°",displayStringId:"",value:2},{displayAltText:"270°",displayStringId:"",value:3}]});const r=["none","x","xz","z"];return o.addDropdown(i,"mirror",{titleAltText:"Mirror",dropdownItems:[{displayAltText:"None",displayStringId:"",value:0},{displayAltText:"X",displayStringId:"",value:1},{displayAltText:"XZ",displayStringId:"",value:2},{displayAltText:"Z",displayStringId:"",value:3}]}),o.addBool(i,"includeEntities",{titleAltText:"Include Entities"}),o.addBool(i,"waterlogBlocks",{titleAltText:"Waterlog Blocks"}),o.addBool(i,"removeBlocks",{titleAltText:"Remove Blocks"}),t.bindPropertyPane(o),t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(t,o)=>{try{if(o.mouseAction==n.MouseActionType.LeftButton)if(o.inputType==n.MouseInputType.ButtonDown)e.extensionContext.selectionManager.selection.clear();else if(o.inputType==n.MouseInputType.ButtonUp){const t=e.extensionContext.player;if(0==i.structureName.trim().length)return;t.dimension.runCommandAsync(`structure load "${i.structureName}" ${e.extensionContext.cursor.getPosition().x} ${e.extensionContext.cursor.getPosition().y} ${e.extensionContext.cursor.getPosition().z} ${a[i.rotation]} ${r[i.mirror]} ${i.includeEntities} ${!i.removeBlocks} ${i.waterlogBlocks}`),e.extensionContext.selectionManager.selection.clear()}}catch(t){e.log.error(t)}}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("StructureSaver",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Structure Saver (CTRL + SHIFT + P)",tooltipAltText:"",icon:"pack://textures/editor/structure_saver.png?filtering=point"});e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5}};let o={x:0,y:0,z:0};const i=e.createPropertyPane({titleAltText:"Structure Saver",titleStringId:"",width:40}),r=n.bindDataSource(i,{origin:{x:0,y:0,z:0},size:{x:0,y:0,z:0},structureName:"",includeEntities:!0}),l=(e,t,n,i,s)=>{const r=t.cursorBlockLocation;if(n||i||s)if(!n||i||s)if(!i||n||s){if(s&&!n&&!i)if(e.extensionContext.selectionManager.selection.isEmpty)e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else{const o=e.extensionContext.selectionManager.selection.peekLastVolume().volume,n=a.BlockVolumeUtils.getBoundingBox(o),i=a.Vector.subtract(new a.Vector(t.location.x,t.location.y,t.location.z),new a.Vector(n.min.x,n.min.y,n.min.z));if(!0){const t=Math.ceil(i.y)-1;e.extensionContext.selectionManager.selection.popVolume(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:{x:n.min.x,y:n.min.y,z:n.min.z},to:{x:n.max.x,y:t,z:n.max.z}}})}}}else e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else if(e.extensionContext.selectionManager.selection.isEmpty)e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else{const t=o;e.extensionContext.selectionManager.selection.popVolume(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:t,to:r}})}else e.extensionContext.selectionManager.selection.clear(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r},c=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!1,!1,!1)}});t.registerKeyBinding(c,n.KeyboardKey.ENTER,n.InputModifier.None);const u=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!1,!0,!1)}});t.registerKeyBinding(u,n.KeyboardKey.ENTER,n.InputModifier.Control);const g=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!0,!1,!1)}});t.registerKeyBinding(g,n.KeyboardKey.ENTER,n.InputModifier.Shift);const _=e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(t,o)=>{o.mouseAction===n.MouseActionType.LeftButton&&(o.inputType===n.MouseInputType.ButtonDown?t.rayHit?l(e,t,o.modifiers.shift,o.modifiers.ctrl,o.modifiers.alt):e.extensionContext.selectionManager.selection.clear():(o.inputType,n.MouseInputType.ButtonUp))}});t.registerMouseButtonBinding(_);const d=(t,o,n,i)=>{if(n===i)return;const s=e.extensionContext.selectionManager.selection;if(!s.isEmpty){s.peekLastVolume().volume&&(s.popVolume(),s.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r.origin,to:{x:r.origin.x+r.size.x-1,y:r.origin.y+r.size.y-1,z:r.origin.z+r.size.z-1}}}))}},p=i.createPropertyPane({titleAltText:"Transform",titleStringId:""}),m=p.addVector3(r,"origin",{titleAltText:"Origin",enable:!0,minX:Number.MIN_SAFE_INTEGER,minY:Number.MIN_SAFE_INTEGER,minZ:Number.MIN_SAFE_INTEGER,onChange:d}),y=p.addVector3(r,"size",{titleAltText:"Size",enable:!0,minX:1,minY:1,minZ:1,maxX:100,maxY:100,maxZ:100,onChange:d}),x=(e,t)=>{let o=0,n=a.system.run((()=>{if(void 0!==e.extensionContext.selectionManager)if(r){if(o++%5==0){o=0;let t=0,n=0,i=0,s=0,l=0,c=0;const u=e.extensionContext.selectionManager.selection;if(u&&!u.isEmpty){const e=a.BlockVolumeUtils.getBoundingBox(u.peekLastVolume().volume),o=a.BoundingBoxUtils.getSpan(e);t=e.min.x,n=e.min.y,i=e.min.z,s=o.x,l=o.y,c=o.z,m?.enable||m&&(m.enable=!0),y?.enable||y&&(y.enable=!0)}else m?.enable&&m&&(m.enable=!1),y?.enable&&y&&(y.enable=!1);r.origin.x===t&&r.origin.y===n&&r.origin.z===i&&r.size.x===s&&r.size.y===l&&r.size.z===c||(r.origin.x=Math.trunc(t),r.origin.y=Math.trunc(n),r.origin.z=Math.trunc(i),r.size.x=Math.trunc(s),r.size.y=Math.trunc(l),r.size.z=Math.trunc(c))}e.toolRail.selectedOptionId===t.id&&(n=a.system.run((()=>x(e,t))))}else e.log.error("Pane settings object not defined, unable to refresh values for selection.")}))};return t.onModalToolActivation.subscribe((o=>{o.isActiveTool&&(e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState),x(e,t))})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_P,n.InputModifier.Control|n.InputModifier.Shift),i.addString(r,"structureName",{titleAltText:"Structure Name"}),i.addBool(r,"includeEntities",{titleAltText:"Include Entities"}),i.addButton(e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:async()=>{const t=e.extensionContext.player;t.dimension;if(e.extensionContext.selectionManager.selection.isEmpty)return void t.sendMessage("No selection available to fill");const{x:o,y:n,z:i}=e.extensionContext.selectionManager.selection.getBoundingBox().min,{x:a,y:s,z:l}=e.extensionContext.selectionManager.selection.getBoundingBox().max;0!=r.structureName.trim().length&&(t.dimension.runCommandAsync(`structure save ${r.structureName} ${o} ${n} ${i} ${a} ${s} ${l} ${r.includeEntities} disk`),t.sendMessage("Structure Saved."),e.extensionContext.selectionManager.selection.clear())}}),{titleAltText:"Save"}),i.addDivider(),i.addButton(e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.extensionContext.selectionManager.selection.clear()}}),{titleAltText:"Deselect",variant:"secondary"}),t.bindPropertyPane(i),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("divider__",i,(()=>{})),n.registerEditorExtension("EntitySpawner",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Entity Spawner (CTRL + E)",tooltipAltText:"Left mouse click or drag-to-spawn",icon:"pack://textures/editor/entity.png?filtering=point"}),o=e.extensionContext.selectionManager.create();o.visible=!0,o.setOutlineColor(new s(0,1,0,.2)),o.setFillColor(new s(0,1,0,.1)),e.scratchStorage={currentCursorState:{outlineColor:new s(0,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Face,visible:!0,fixedModeDistance:5},previewSelection:o},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_E,n.InputModifier.Control);const i=e.createPropertyPane({titleAltText:"Entity Spawner",titleStringId:"",width:40}),r=n.bindDataSource(i,{nameTag:"",entityType:"minecraft:creeper"}),l=new Set(["minecraft:agent","minecraft:area_effect_cloud","minecraft:dragon_fireball","minecraft:egg","minecraft:ender_pearl","minecraft:eye_of_ender_signal","minecraft:fireball","minecraft:fireworks_rocket","minecraft:fishing_hook","minecraft:lingering_potion","minecraft:llama_spit","minecraft:player","minecraft:shulker_bullet","minecraft:small_fireball","minecraft:snowball","minecraft:splash_potion","minecraft:thrown_trident","minecraft:tripod_camera","minecraft:villager","minecraft:xp_bottle"]),c=[...a.EntityTypes.getAll()].map((({id:e})=>e)).reduce(((e,t)=>(l.has(t)||e.push(t),e)),[]).sort(((e,t)=>e.localeCompare(t)));i.addDropdown(r,"entityType",{titleAltText:"Entity Type",dropdownItems:c.map((e=>({value:e,displayAltText:e,displayStringId:"entity."+e.replace("minecraft:","")+".name"})))}),i.addString(r,"nameTag",{titleAltText:"Name Tag"}),t.bindPropertyPane(i);const u=()=>{if(!e.scratchStorage?.previewSelection)return void e.log.error("Entity Spawner storage was not initialized.");const t=e.scratchStorage.previewSelection,o=e.extensionContext.player.dimension.getBlock(e.extensionContext.cursor.getPosition());if(!o)return;const n={from:o.location,to:o.location};e.scratchStorage.lastVolumePlaced&&a.BoundingBoxUtils.equals(e.scratchStorage.lastVolumePlaced,a.BlockVolumeUtils.getBoundingBox(n))||(t.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:n}),e.scratchStorage.lastVolumePlaced=a.BlockVolumeUtils.getBoundingBox(n))};return t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(t,o)=>{o.mouseAction==n.MouseActionType.LeftButton&&(o.inputType==n.MouseInputType.ButtonDown?(e.scratchStorage.previewSelection.clear(),u()):o.inputType==n.MouseInputType.ButtonUp&&await n.executeLargeOperation(e.scratchStorage.previewSelection,(t=>{const o=e.extensionContext.player,n=o.dimension.getBlock(t);if(n){o.dimension.spawnEntity(r.entityType,{x:n.x+.5,y:n.y,z:n.z+.5}).nameTag=r.nameTag}})).catch((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})).then((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})))}})),t.registerMouseDragBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(e,t)=>{t.inputType===n.MouseInputType.Drag&&u()}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("ItemSpawner",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Item Spawner (CTRL + I)",tooltipAltText:"Left mouse click or drag-to-spawn",icon:"pack://textures/editor/item.png?filtering=point"}),o=e.extensionContext.selectionManager.create();o.visible=!0,o.setOutlineColor(new s(0,.5,.5,.2)),o.setFillColor(new s(0,0,.5,.1)),e.scratchStorage={currentCursorState:{outlineColor:new s(0,.5,.5,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Face,visible:!0,fixedModeDistance:5},previewSelection:o},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_I,n.InputModifier.Control);const i=e.createPropertyPane({titleAltText:"Item Spawner",titleStringId:"",width:40}),r=n.bindDataSource(i,{itemType:"minecraft:diamond_sword",amount:1}),l=new Set([...a.BlockTypes.getAll()].map((({id:e})=>e))),c=[...a.ItemTypes.getAll()].map((({id:e})=>e)).reduce(((e,t)=>(l.has(t)||e.push(t),e)),[]).sort(((e,t)=>e.localeCompare(t)));i.addDropdown(r,"itemType",{titleAltText:"Item Type",dropdownItems:c.map((e=>({value:e,displayAltText:e,displayStringId:"item."+e.replace("minecraft:","")+".name"})))}),i.addNumber(r,"amount",{titleAltText:"Amount",min:1,max:64,showSlider:!0}),t.bindPropertyPane(i);const u=()=>{if(!e.scratchStorage?.previewSelection)return void e.log.error("Item Spawner storage was not initialized.");const t=e.scratchStorage.previewSelection,o=e.extensionContext.player.dimension.getBlock(e.extensionContext.cursor.getPosition());if(!o)return;const n={from:o.location,to:o.location};e.scratchStorage.lastVolumePlaced&&a.BoundingBoxUtils.equals(e.scratchStorage.lastVolumePlaced,a.BlockVolumeUtils.getBoundingBox(n))||(t.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:n}),e.scratchStorage.lastVolumePlaced=a.BlockVolumeUtils.getBoundingBox(n))};return t.registerMouseWheelBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(e,t)=>{t.modifiers.ctrl?t.inputType==n.MouseInputType.WheelOut&&r.amount+8<64?r.amount+=8:t.inputType==n.MouseInputType.WheelIn&&r.amount-8>1&&(r.amount-=8):t.inputType==n.MouseInputType.WheelOut&&r.amount<64?r.amount++:t.inputType==n.MouseInputType.WheelIn&&r.amount>1&&r.amount--}})),t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:async(t,o)=>{o.mouseAction==n.MouseActionType.LeftButton&&(o.inputType==n.MouseInputType.ButtonDown?(e.scratchStorage.previewSelection.clear(),u()):o.inputType==n.MouseInputType.ButtonUp&&await n.executeLargeOperation(e.scratchStorage.previewSelection,(t=>{const o=e.extensionContext.player,n=o.dimension.getBlock(t);if(n){o.dimension.spawnItem(new a.ItemStack(r.itemType,r.amount),{x:n.x+.5,y:n.y,z:n.z+.5})}})).catch((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})).then((()=>{e.extensionContext.transactionManager.commitOpenTransaction(),e.scratchStorage?.previewSelection.clear()})))}})),t.registerMouseDragBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(e,t)=>{t.inputType===n.MouseInputType.Drag&&u()}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("_divider_",i,(()=>{})),n.registerEditorExtension("BlocksCounter",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Blocks Counter",tooltipAltText:"",icon:"pack://textures/editor/blocks_counter.png?filtering=point"});e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5}};let o={x:0,y:0,z:0};const i=e.createPropertyPane({titleAltText:"Blocks Counter",titleStringId:""}),r=n.bindDataSource(i,{origin:{x:0,y:0,z:0},size:{x:0,y:0,z:0}}),l=(e,t,n,i,s)=>{const r=t.cursorBlockLocation;if(n||i||s)if(!n||i||s)if(!i||n||s){if(s&&!n&&!i)if(e.extensionContext.selectionManager.selection.isEmpty)e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else{const o=e.extensionContext.selectionManager.selection.peekLastVolume().volume,n=a.BlockVolumeUtils.getBoundingBox(o),i=a.Vector.subtract(new a.Vector(t.location.x,t.location.y,t.location.z),new a.Vector(n.min.x,n.min.y,n.min.z));if(!0){const t=Math.ceil(i.y)-1;e.extensionContext.selectionManager.selection.popVolume(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:{x:n.min.x,y:n.min.y,z:n.min.z},to:{x:n.max.x,y:t,z:n.max.z}}})}}}else e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else if(e.extensionContext.selectionManager.selection.isEmpty)e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else{const t=o;e.extensionContext.selectionManager.selection.popVolume(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:t,to:r}})}else e.extensionContext.selectionManager.selection.clear(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r},c=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!1,!1,!1)}});t.registerKeyBinding(c,n.KeyboardKey.ENTER,n.InputModifier.None);const u=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!1,!0,!1)}});t.registerKeyBinding(u,n.KeyboardKey.ENTER,n.InputModifier.Control);const g=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!0,!1,!1)}});t.registerKeyBinding(g,n.KeyboardKey.ENTER,n.InputModifier.Shift);const _=e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(t,o)=>{o.mouseAction===n.MouseActionType.LeftButton&&(o.inputType===n.MouseInputType.ButtonDown?t.rayHit?l(e,t,o.modifiers.shift,o.modifiers.ctrl,o.modifiers.alt):e.extensionContext.selectionManager.selection.clear():(o.inputType,n.MouseInputType.ButtonUp))}});t.registerMouseButtonBinding(_);const d=(t,o,n,i)=>{if(n===i)return;const s=e.extensionContext.selectionManager.selection;if(!s.isEmpty){s.peekLastVolume().volume&&(s.popVolume(),s.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r.origin,to:{x:r.origin.x+r.size.x-1,y:r.origin.y+r.size.y-1,z:r.origin.z+r.size.z-1}}}))}},p=i.createPropertyPane({titleAltText:"Transform",titleStringId:""}),m=p.addVector3(r,"origin",{titleAltText:"Origin",enable:!0,minX:Number.MIN_SAFE_INTEGER,minY:Number.MIN_SAFE_INTEGER,minZ:Number.MIN_SAFE_INTEGER,onChange:d}),y=p.addVector3(r,"size",{titleAltText:"Size",enable:!0,minX:1,minY:1,minZ:1,maxX:100,maxY:100,maxZ:100,onChange:d}),x=(e,t)=>{let o=0,n=a.system.run((()=>{if(void 0!==e.extensionContext.selectionManager)if(r){if(o++%5==0){o=0;let t=0,n=0,i=0,s=0,l=0,c=0;const u=e.extensionContext.selectionManager.selection;if(u&&!u.isEmpty){const e=a.BlockVolumeUtils.getBoundingBox(u.peekLastVolume().volume),o=a.BoundingBoxUtils.getSpan(e);t=e.min.x,n=e.min.y,i=e.min.z,s=o.x,l=o.y,c=o.z,m?.enable||m&&(m.enable=!0),y?.enable||y&&(y.enable=!0)}else m?.enable&&m&&(m.enable=!1),y?.enable&&y&&(y.enable=!1);r.origin.x===t&&r.origin.y===n&&r.origin.z===i&&r.size.x===s&&r.size.y===l&&r.size.z===c||(r.origin.x=Math.trunc(t),r.origin.y=Math.trunc(n),r.origin.z=Math.trunc(i),r.size.x=Math.trunc(s),r.size.y=Math.trunc(l),r.size.z=Math.trunc(c))}e.toolRail.selectedOptionId===t.id&&(n=a.system.run((()=>x(e,t))))}else e.log.error("Pane settings object not defined, unable to refresh values for selection.")}))};t.onModalToolActivation.subscribe((o=>{o.isActiveTool&&(e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState),x(e,t))}));const h=i.addButton(e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:async()=>{const t=e.extensionContext.player;if(e.extensionContext.selectionManager.selection.isEmpty)return void t.sendMessage("No selection available to fill");h.enable=!1,t.sendMessage("Getting Blocks!");const o=[];await n.executeLargeOperation(e.extensionContext.selectionManager.selection,(e=>{const n=t.dimension.getBlock(e);if(n&&"minecraft:air"!=n.typeId){const e=o.find((e=>e.typeId==n.typeId));e?e.amount++:o.push({typeId:n.typeId,amount:1})}})).catch((()=>{e.extensionContext.selectionManager.selection.clear()})).then((()=>{e.extensionContext.selectionManager.selection.clear();const t=e.createPropertyPane({titleAltText:"Blocks",titleStringId:""}),i=n.bindDataSource(t,{}),a=o.sort(((e,t)=>t.amount-e.amount));for(let e=0;e<o.length;e++){const o=a[e];i[o.typeId]=o.amount;t.createPropertyPane({titleAltText:o.typeId,titleStringId:"tile."+o.typeId.split(":")[1]+".name"}).addNumber(i,o.typeId,{titleAltText:"Amount",showSlider:!1,enable:!1})}t.update(!0),h.enable=!0}))}}),{titleAltText:"Get Blocks"});return i.addDivider(),i.addButton(e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.extensionContext.selectionManager.selection.clear()}}),{titleAltText:"Deselect",variant:"secondary"}),t.bindPropertyPane(i),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("BlockModifier",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Block Modifier",tooltipAltText:"",icon:"pack://textures/editor/block_modifier.png?filtering=point"});return e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5}},t.onModalToolActivation.subscribe((t=>{t.isActiveTool&&e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState)})),t.registerMouseButtonBinding(e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(o,i)=>{i.mouseAction==n.MouseActionType.LeftButton&&i.inputType==n.MouseInputType.ButtonDown&&x(e,t,e.extensionContext.player,e.extensionContext.cursor.getPosition())}})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("BlocksReplacer",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`);const t=e.toolRail.addTool({displayAltText:"Block Replace (Ctrl + R)",tooltipAltText:"",icon:"pack://textures/editor/replace.png?filtering=point"});e.scratchStorage={currentCursorState:{outlineColor:new s(1,1,0,1),controlMode:n.CursorControlMode.KeyboardAndMouse,targetMode:n.CursorTargetMode.Block,visible:!0,fixedModeDistance:5}};let o={x:0,y:0,z:0};const i=e.createPropertyPane({titleAltText:"Block Replace",titleStringId:""}),r=n.bindDataSource(i,{origin:{x:0,y:0,z:0},size:{x:0,y:0,z:0},blockType:"minecraft:stone",replaceWith:"minecraft:stone"}),l=(e,t,n,i,s)=>{const r=t.cursorBlockLocation;if(n||i||s)if(!n||i||s)if(!i||n||s){if(s&&!n&&!i)if(e.extensionContext.selectionManager.selection.isEmpty)e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else{const o=e.extensionContext.selectionManager.selection.peekLastVolume().volume,n=a.BlockVolumeUtils.getBoundingBox(o),i=a.Vector.subtract(new a.Vector(t.location.x,t.location.y,t.location.z),new a.Vector(n.min.x,n.min.y,n.min.z));if(!0){const t=Math.ceil(i.y)-1;e.extensionContext.selectionManager.selection.popVolume(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:{x:n.min.x,y:n.min.y,z:n.min.z},to:{x:n.max.x,y:t,z:n.max.z}}})}}}else e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else if(e.extensionContext.selectionManager.selection.isEmpty)e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r;else{const t=o;e.extensionContext.selectionManager.selection.popVolume(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:t,to:r}})}else e.extensionContext.selectionManager.selection.clear(),e.extensionContext.selectionManager.selection.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r,to:r}}),o=r},c=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!1,!1,!1)}});t.registerKeyBinding(c,n.KeyboardKey.ENTER,n.InputModifier.None);const u=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!1,!0,!1)}});t.registerKeyBinding(u,n.KeyboardKey.ENTER,n.InputModifier.Control);const g=e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{const t=e.extensionContext.cursor.getPosition(),o={location:{x:0,y:0,z:0},direction:new a.Vector(0,0,0),cursorBlockLocation:t,rayHit:!1};l(e,o,!0,!1,!1)}});t.registerKeyBinding(g,n.KeyboardKey.ENTER,n.InputModifier.Shift);const _=e.actionManager.createAction({actionType:n.ActionTypes.MouseRayCastAction,onExecute:(t,o)=>{o.mouseAction===n.MouseActionType.LeftButton&&(o.inputType===n.MouseInputType.ButtonDown?t.rayHit?l(e,t,o.modifiers.shift,o.modifiers.ctrl,o.modifiers.alt):e.extensionContext.selectionManager.selection.clear():(o.inputType,n.MouseInputType.ButtonUp))}});t.registerMouseButtonBinding(_);const d=(t,o,n,i)=>{if(n===i)return;const s=e.extensionContext.selectionManager.selection;if(!s.isEmpty){s.peekLastVolume().volume&&(s.popVolume(),s.pushVolume({action:a.CompoundBlockVolumeAction.Add,volume:{from:r.origin,to:{x:r.origin.x+r.size.x-1,y:r.origin.y+r.size.y-1,z:r.origin.z+r.size.z-1}}}))}},p=i.createPropertyPane({titleAltText:"Transform",titleStringId:""}),m=p.addVector3(r,"origin",{titleAltText:"Origin",enable:!0,minX:Number.MIN_SAFE_INTEGER,minY:Number.MIN_SAFE_INTEGER,minZ:Number.MIN_SAFE_INTEGER,onChange:d}),y=p.addVector3(r,"size",{titleAltText:"Size",enable:!0,minX:1,minY:1,minZ:1,maxX:100,maxY:100,maxZ:100,onChange:d}),x=(e,t)=>{let o=0,n=a.system.run((()=>{if(void 0!==e.extensionContext.selectionManager)if(r){if(o++%5==0){o=0;let t=0,n=0,i=0,s=0,l=0,c=0;const u=e.extensionContext.selectionManager.selection;if(u&&!u.isEmpty){const e=a.BlockVolumeUtils.getBoundingBox(u.peekLastVolume().volume),o=a.BoundingBoxUtils.getSpan(e);t=e.min.x,n=e.min.y,i=e.min.z,s=o.x,l=o.y,c=o.z,m?.enable||m&&(m.enable=!0),y?.enable||y&&(y.enable=!0)}else m?.enable&&m&&(m.enable=!1),y?.enable&&y&&(y.enable=!1);r.origin.x===t&&r.origin.y===n&&r.origin.z===i&&r.size.x===s&&r.size.y===l&&r.size.z===c||(r.origin.x=Math.trunc(t),r.origin.y=Math.trunc(n),r.origin.z=Math.trunc(i),r.size.x=Math.trunc(s),r.size.y=Math.trunc(l),r.size.z=Math.trunc(c))}e.toolRail.selectedOptionId===t.id&&(n=a.system.run((()=>x(e,t))))}else e.log.error("Pane settings object not defined, unable to refresh values for selection.")}))};return t.onModalToolActivation.subscribe((o=>{o.isActiveTool&&(e.extensionContext.cursor.setProperties(e.scratchStorage.currentCursorState),x(e,t))})),e.inputManager.registerKeyBinding(n.EditorInputContext.GlobalToolMode,e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.toolRail.setSelectedOptionId(t.id,!0)}}),n.KeyboardKey.KEY_R,n.InputModifier.Control),i.addBlockPicker(r,"blockType",{titleAltText:"Block Type"}),i.addBlockPicker(r,"replaceWith",{titleAltText:"Replace With"}),i.addButton(e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:async()=>{const t=e.extensionContext.player,o=t.dimension;e.extensionContext.selectionManager.selection.isEmpty?t.sendMessage("No selection available to fill"):(e.extensionContext.transactionManager.openTransaction("BlockReplacer"),e.extensionContext.transactionManager.trackBlockChangeSelection(e.extensionContext.selectionManager.selection),await n.executeLargeOperation(e.extensionContext.selectionManager.selection,(e=>{const t=o.getBlock(e);t&&(t.isWaterlogged=!1,t?.typeId==r.blockType&&t.setType(r.replaceWith))})).catch((t=>{e.log.error(t),e.extensionContext.transactionManager.discardOpenTransaction()})).then((()=>{e.extensionContext.transactionManager.commitOpenTransaction()})))}}),{titleAltText:"Replace"}),i.addDivider(),i.addButton(e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>{e.extensionContext.selectionManager.selection.clear()}}),{titleAltText:"Deselect",variant:"secondary"}),t.bindPropertyPane(i),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("NightVision",(e=>{const t=e.createMenu({name:"Night Vision"});return t.addItem({name:"Enable"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.addEffect("night_vision",2e7,{amplifier:1,showParticles:!1})})),t.addItem({name:"Disable"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.removeEffect("night_vision")})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("WorldSettings",(e=>{const t=e.createMenu({name:"World Settings"}),o=t.addItem({name:"Weather"});o.addItem({name:"Clear"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.setWeather(a.WeatherType.Clear)})),o.addItem({name:"Rain"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.setWeather(a.WeatherType.Rain)})),o.addItem({name:"Thunder"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.setWeather(a.WeatherType.Thunder)}));const i=t.addItem({name:"Time"});return i.addItem({name:"Sunrise"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.runCommand("time set sunrise")})),i.addItem({name:"Day"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.runCommand("time set day")})),i.addItem({name:"Noon"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.runCommand("time set noon")})),i.addItem({name:"Sunset"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.runCommand("time set sunset")})),i.addItem({name:"Night"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.runCommand("time set night")})),i.addItem({name:"Midnight"},e.actionManager.createAction({actionType:n.ActionTypes.NoArgsAction,onExecute:()=>e.extensionContext.player.dimension.runCommand("time set midnight")})),[]}),(e=>{e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)})),n.registerEditorExtension("PlayerPosition",(e=>{e.log.debug(`Initializing ${e.extensionContext.extensionName} extension`),e.scratchStorage={isDisposed:!1,latestRunId:-1};const t=e.extensionContext.player;let o=t.location;const i=e.createStatusBarItem(n.EditorStatusBarAlignment.Left,30),s=e.createStatusBarItem(n.EditorStatusBarAlignment.Right,30);let r=0;const l=()=>{var n,c;r++%5==0&&(n=t.location,c=o,n.x!==c.x||n.y!==c.y||n.z!==c.z)&&(r=0,o=t.location,i.text=`Position: (${Math.floor(o.x)} / ${Math.floor(o.y)} / ${Math.floor(o.z)})`,s.text=`Dimension: ${h[t.dimension.id]}`),e.scratchStorage&&!e.scratchStorage.isDisposed&&(e.scratchStorage.latestRunId=a.system.run(l))};return e.scratchStorage.latestRunId=a.system.run(l),[]}),(e=>{e.scratchStorage&&-1!==e.scratchStorage.latestRunId&&(e.scratchStorage.isDisposed=!0,a.system.clearRun(e.scratchStorage.latestRunId)),e.log.debug(`Shutting down ${e.extensionContext.extensionName} extension`)}));